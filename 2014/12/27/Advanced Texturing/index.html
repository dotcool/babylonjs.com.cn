
 <!DOCTYPE HTML>
<html >
<head>
  <meta charset="UTF-8">
  
    <title>Hexo</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=3, minimum-scale=1">
    
    <meta name="author" content="John Doe">
    
    <meta name="description" content="You have already seen how you can apply textures on meshes, but here you are going one step further, with more complex textures like mirrors, videos, ">
    
    
    
    
    
    <link rel="icon" href="/img/favicon.ico">
    
    
    <link rel="apple-touch-icon" href="/img/pacman.jpg">
    <link rel="apple-touch-icon-precomposed" href="/img/pacman.jpg">
    
    <link rel="stylesheet" href="/css/style.css" type="text/css">

</head>

  <body>
    <header>
      <div>
		
			<div id="imglogo">
				<a href="/"><img src="/img/logo.svg" alt="Hexo" title="Hexo"/></a>
			</div>
			
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="Hexo">Hexo</a></h1>
				<h2 class="blog-motto"></h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="Menu">
			</a></div>
			<nav class="animated">
				<ul>
					
						<li><a href="/">Home</a></li>
					
						<li><a href="/archives">Archives</a></li>
					
					<li>
					
					<form class="search" action="//google.com/search" method="get" accept-charset="utf-8">
						<label>Search</label>
						<input type="text" id="search" name="q" autocomplete="off" maxlength="20" placeholder="Search" />
						<input type="hidden" name="q" value="site:www.babylonjs.com.cn">
					</form>
					
					</li>
				</ul>
			</nav>			
</div>

    </header>
    <div id="container">
      <div id="main" class="post" itemscope itemprop="blogPost">
	<article itemprop="articleBody"> 
		<header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2014/12/27/Advanced Texturing/" title="" itemprop="url"></a>
  </h1>
  <p class="article-author">By
    
      <a href="http://www.babylonjs.com.cn" title="John Doe">John Doe</a>
    </p>
  <p class="article-time">
    <time datetime="2014-12-27T02:53:21.000Z" itemprop="datePublished">Dec 27 2014</time>
    Updated:<time datetime="2014-12-27T02:53:21.000Z" itemprop="dateModified">Dec 27 2014</time>
    
  </p>
</header>
	<div class="article-content">
		
		
		<div id="toc" class="toc-article">
			<strong class="toc-title">Contents</strong>
		<ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#How_can_I_do_this_?"><span class="toc-number">1.</span> <span class="toc-text">How can I do this ?</span></a></li></ol>
		</div>
		
		<p>You have already seen how you can apply textures on meshes, but here you are going one step further, with more complex textures like mirrors, videos, bump mapping, and multi-texture.</p>
<p><img src="http://www.babylonjs.com/tutorials/Advanced Texturing/0.png" alt="AdvancedTexturing"></p>
<p>A picture from our <a href="http://www.babylonjs.com/playground/#EKFLA" target="_blank" rel="external">Advanced Texturing playground demo</a>.</p>
<h2 id="How_can_I_do_this_?">How can I do this ?</h2>
<p>These new types of textures are considered advanced because we are not used to dealing with them, but you’ll see that it is very easy to create them with JavaScript and Babylon.js!</p>
<ul>
<li><strong>Mirror</strong></li>
</ul>
<p>Mirror textures are used to simulate “mirrors” (!) which means that babylon.js will compute the reflection and fill the texture with the results. A mirror texture must be set in the <em>reflectionTexture</em>  channel of a <em>StandardMaterial</em> :</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> mirrorMaterial = <span class="keyword">new</span> BABYLON.StandardMaterial(<span class="string">"texture4"</span>, scene);</div><div class="line">mirrorMaterial.reflectionTexture = <span class="keyword">new</span> BABYLON.MirrorTexture(<span class="string">"mirror"</span>, <span class="number">512</span>, scene, <span class="literal">true</span>);</div><div class="line">mirrorMaterial.reflectionTexture.mirrorPlane = <span class="keyword">new</span> BABYLON.Plane(<span class="number">0</span>, -<span class="number">1.0</span>, <span class="number">0</span>, -<span class="number">10.0</span>);</div><div class="line">mirrorMaterial.reflectionTexture.renderList = [sphere1, sphere2];</div></pre></td></tr></table></figure>

<p>A <em>mirrorTexture</em> is created with a parameter that specifies the size of the rendering buffer (512x512 here, better reflection quality if increased).<br>Then you have to define the reflection plane and a render list (the list of meshes to render inside the mirror).</p>
<p>You can also use a <a href="http://www.sokrate.fr/documentation/babylonjs/BABYLON.CubeTexture.html" target="_blank" rel="external">CubeTexture</a> as a reflectionTexture on a StandardMaterial.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">material.reflectionTexture = <span class="keyword">new</span> BABYLON.CubeTexture(<span class="string">"textures/TropicalSunnyDay"</span>, scene);</div></pre></td></tr></table></figure>

<p>Like the CubeTextures used in skyboxes, the textures/TropicalSunnyDay directory must contain 6 textures, covering all 6 directions of the cube.  Each image must be named according to the corresponding CubeTexture face: “TropicalSunnyDay_nx.jpg”, “TropicalSunnyDay_ny.jpg”, “TropicalSunnyDay_nz.jpg”, “TropicalSunnyDay_px.jpg”, “TropicalSunnyDay_py.jpg”, “TropicalSunnyDay_pz.jpg”.</p>
<p>You can see this nice advanced texturing technique… in <a href="http://babylonjs-playground.azurewebsites.net/#IRZYH" target="_blank" rel="external">this playground scene</a>, and in this <a href="https://github.com/BabylonJS/Babylon.js/wiki/How-to-use-FresnelParameters" target="_blank" rel="external">Fresnel</a>-enhanced <a href="http://www.babylonjs.com/playground/#SBTYP" target="_blank" rel="external">playground scene</a>, as well.</p>
<ul>
<li><strong>Bump Mapping</strong></li>
</ul>
<p>Bump mapping is a technique in computer graphics to make a rendered surface look more realistic without modifying surface geometry. This is only a texture modification, so computation is the same but rendering is much better, have a look:</p>
<p><img src="http://www.babylonjs.com/tutorials/Advanced Texturing/1.png" alt="bumpMap"></p>
<p>The bump texture simulates bumps and dents using a map called a normal map.</p>
<p><img src="http://www.babylonjs.com/tutorials/Advanced Texturing/normalMap.jpg" alt="normalMap"></p>
<p><em>A normal map</em></p>
<p>And now, let’s code this amazing texture within two lines of JavaScript: first we create a new standard material, and then, simply declare a new bump texture:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> bumpMaterial = <span class="keyword">new</span> BABYLON.StandardMaterial(<span class="string">"texture1"</span>, scene);</div><div class="line">bumpMaterial.bumpTexture = <span class="keyword">new</span> BABYLON.Texture(<span class="string">"normalMap.jpg"</span>, scene);</div></pre></td></tr></table></figure>

<p>That’s it! The bump texture disturbs/perturbs the normal to produce a result like this, where you should recognize our normal map:</p>
<p><img src="http://www.babylonjs.com/tutorials/Advanced Texturing/2.png" alt="finalResult"></p>
<p><em>Resulting gorgeous bumpy sphere</em></p>
<ul>
<li><strong>Video</strong></li>
</ul>
<p>If you want to display a video in your scene, the Babylon engine has a special texture for that. This special texture works similar to other textures, with the exception of a few parameters. These parameters include video urls (an url array), the size of the video texture (here is 256), the scene, and a final optional boolean that indicates if you want to use <a href="http://en.wikipedia.org/wiki/Mipmap" target="_blank" rel="external">mipmap</a> or not. </p>
<p>Here is an example from our <a href="http://www.babylonjs.com/?9" target="_blank" rel="external">Flat2009 demo</a>. This plays a video on the demo’s tv screen (ecran = screen).  </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">ecran.material.diffuseTexture = <span class="keyword">new</span> BABYLON.VideoTexture(<span class="string">"video"</span>, </div><div class="line">[<span class="string">"Scenes/Flat2009/babylonjs.mp4"</span>, <span class="string">"Scenes/Flat2009/babylonjs.webm"</span>], <span class="number">256</span>, scene, <span class="literal">true</span>);</div></pre></td></tr></table></figure>

<p>The <a href="http://www.sokrate.fr/documentation/babylonjs/BABYLON.VideoTexture.html" target="_blank" rel="external"><em>VideoTexture</em> object</a> accepts an array of videos (to take into account various codecs).  The first video in the array that can be loaded… is the one used as content source.  Currently, HTML5 supports .mp4, .webm, and .ogv video formats.</p>
<p>The internal <a href="http://www.w3.org/wiki/HTML/Elements/video" target="_blank" rel="external">video DOM object</a> is accessible via the VideoTexture.video property… which allows you to control some characteristics and monitor the status of the video (things such as play, pause, stop, loop, autoplay).  See the link above for the full story.</p>
<p><img src="http://www.babylonjs.com/tutorials/Advanced Texturing/3.png" alt="video"></p>
<p>Even though we are working with advanced texturing techniques, <em>VideoTexture</em> works in conjunction with a StandardMaterial. Simply put, it needs to have some light. As a handy alternative or video illumination assistant, you may want to set an <em>emissiveColor</em> on the base material of the mesh.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ecran.material.emissiveColor = <span class="keyword">new</span> BABYLON.Color3(<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>);</div></pre></td></tr></table></figure>

<ul>
<li><strong>Multi Materials</strong></li>
</ul>
<p>Using a dedicated texture, multi materials can be assigned to one single mesh. It can be useful if you want your mesh to look different at diferent locations along its width, height, or depth. (such as a cutaway cross-section of the Earth’s mantle).</p>
<p><img src="http://www.babylonjs.com/tutorials/Advanced Texturing/4.png" alt="multimap"></p>
<p>Sometimes it is a bit diffiicult to determine which indices of a mesh should be textured by which of the multiple textures. David Catuhe has provided a comprehensive post about multi materials… on his blog:<br><a href="http://blogs.msdn.com/b/eternalcoding/archive/2013/07/10/babylon-js-using-multi-materials.aspx" target="_blank" rel="external">http://blogs.msdn.com/b/eternalcoding/archive/2013/07/10/babylon-js-using-multi-materials.aspx</a></p>
<p>You can view and play-with the demo used in this tutorial… <a href="http://www.babylonjs.com/playground/#EKFLA" target="_blank" rel="external">right here</a>.</p>
<p>You might also be interested in our <a href="http://blogs.msdn.com/b/eternalcoding/archive/2013/07/01/babylon-js-unleash-the-standardmaterial-for-your-babylon-js-game.aspx" target="_blank" rel="external">Unleash the Standard Material</a> tutorial, and our <a href="https://github.com/BabylonJS/Babylon.js/wiki/04-Materials" target="_blank" rel="external">basic materials</a> tutorial.</p>
  
	</div>
		<footer class="article-footer clearfix">




<div class="article-share" id="share">

  <div data-url="http://www.babylonjs.com.cn/2014/12/27/Advanced Texturing/" data-title="Hexo" data-tsina="null" class="share clearfix">
  </div>

</div>
</footer>   	       
	</article>
	
<nav class="article-nav clearfix">
 
 <div class="prev" >
 <a href="/2014/12/27/Adding-your-own-physics-engine-plugin-to-Babylon.js/" title="">
  <strong>PREVIOUS:</strong><br/>
  <span>
  (no title)</span>
</a>
</div>


<div class="next">
<a href="/2014/12/27/14-Height-map/"  title="">
 <strong>NEXT:</strong><br/> 
 <span>(no title)
</span>
</a>
</div>

</nav>

	
</div>  
      <div class="openaside"><a class="navbutton" href="#" title="Show Sidebar"></a></div>

  <div id="toc" class="toc-aside">
  <strong class="toc-title">Contents</strong>
  <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#How_can_I_do_this_?"><span class="toc-number">1.</span> <span class="toc-text">How can I do this ?</span></a></li></ol>
  </div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="Hide Sidebar"></a></div>
<aside class="clearfix">

  

  

  <div class="rsspart">
	<a href="null" target="_blank" title="rss">RSS</a>
</div>

</aside>
</div>
    </div>
    <footer><div id="footer" >
	
	<div class="line">
		<span></span>
		<div class="author"></div>
	</div>
	
	
	<div class="social-font clearfix">
		
		
		
		
		
	</div>
		<p class="copyright">Powered by <a href="http://hexo.io" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/A-limon/pacman" target="_blank" title="Pacman">Pacman</a> © 2014 
		
		<a href="http://www.babylonjs.com.cn" target="_blank" title="John Doe">John Doe</a>
		
		</p>
</div>
</footer>
    <script src="/js/jquery-2.1.0.min.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else
    {
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
      
      $('#toc.toc-aside').css('display', 'none');
        
    }
  });
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
});
</script>

<script type="text/javascript">
$(document).ready(function(){ 
  var ai = $('.article-content>iframe'),
      ae = $('.article-content>embed'),
      t  = $('#toc'),
      h  = $('article h2')
      ah = $('article h2'),
      ta = $('#toc.toc-aside'),
      o  = $('.openaside'),
      c  = $('.closeaside');
  if(ai.length>0){
    ai.wrap('<div class="video-container" />');
  };
  if(ae.length>0){
   ae.wrap('<div class="video-container" />');
  };
  if(ah.length==0){
    t.css('display','none');
  }else{
    c.click(function(){
      ta.css('display', 'block').addClass('fadeIn');
    });
    o.click(function(){
      ta.css('display', 'none');
    });
    $(window).scroll(function(){
      ta.css("top",Math.max(140,320-$(this).scrollTop()));
    });
  };
});
</script>


<script type="text/javascript">
$(document).ready(function(){ 
  var $this = $('.share'),
      url = $this.attr('data-url'),
      encodedUrl = encodeURIComponent(url),
      title = $this.attr('data-title'),
      tsina = $this.attr('data-tsina');
  var html = [
  '<a href="#" class="overlay" id="qrcode"></a>',
  '<div class="qrcode clearfix"><span>扫描二维码分享到微信朋友圈</span><a class="qrclose" href="#share"></a><strong>Loading...Please wait</strong><img id="qrcode-pic" data-src="http://s.jiathis.com/qrcode.php?url=' + encodedUrl + '"/></div>',
  '<a href="#textlogo" class="article-back-to-top" title="Top"></a>',
  '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="article-share-facebook" target="_blank" title="Facebook"></a>',
  '<a href="#qrcode" class="article-share-qrcode" title="QRcode"></a>',
  '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
  '<a href="http://service.weibo.com/share/share.php?title='+title+'&url='+encodedUrl +'&ralateUid='+ tsina +'&searchPic=true&style=number' +'" class="article-share-weibo" target="_blank" title="Weibo"></a>',
  '<span title="Share to"></span>'
  ].join('');
  $this.append(html);
  $('.article-share-qrcode').click(function(){
    var imgSrc = $('#qrcode-pic').attr('data-src');
    $('#qrcode-pic').attr('src', imgSrc);
    $('#qrcode-pic').load(function(){
        $('.qrcode strong').text(' ');
    });
  });
});     
</script>






  </body>
</html>
