<!DOCTYPE html>
<html>

<head>
  <meta http-equiv="Content-Type" content="text/html" charset="UTF-8" >
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
  <title>动画 | babylonjs</title>
  <meta name="description" content="babylonjs中文网，专注html5游戏开发，babylonjs的文档翻译和实例分析" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="MobileOptimized" content="320" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" type="text/css" href="/css/component.css" />
  <link rel="stylesheet" type="text/css" href="/css/screen.css" />
  <meta name="generator" content="babylonjs">
  <script src="http://static.duoshuo.com/embed.js"></script>
  
  
  

  

</head>
<body>
<div class="container">
    <div class="mp-pusher" id="mp-pusher">
        <i id="scroll-up" class="fa fa-angle-up"></i>
        <nav id="mp-menu" class="mp-menu">
            <div class="mp-level">
                <a data-pjax class="back-home" style="font-size: 20px" href="/"><h2 ><i class="fa fa-home"></i>
                        首页</h2></a>
                <ul class="first-level">
                    <li>
                        <a class="fa fa-archive" href="#"><i class="fa fa-angle-left">
                            </i>&nbsp;&nbsp;归档</a>
                        <div class="mp-level page-list">
                            <h2 ><i class="fa fa-archive"></i>
                                归档</h2>
                            <a class="mp-back" href="#">返回</a>
                            <form id="search-form" action="">
                                <input type="text" class="search search-archive" placeholder="搜索.."/>
                            </form>
                            <ul>
                                <div class="mp-scroll">
                                
                                <li class="search-archive-li mp-pjax">
                                    <a href="/2014/12/28/05 Cameras/">摄像机</a>
                                </li>
                                
                                <li class="search-archive-li mp-pjax">
                                    <a href="/2014/12/27/04-Materials/">材质</a>
                                </li>
                                
                                <li class="search-archive-li mp-pjax">
                                    <a href="/2014/12/27/03---Position,-Rotation-&amp;-Scaling/">位移，旋转，缩放</a>
                                </li>
                                
                                <li class="search-archive-li mp-pjax">
                                    <a href="/2014/12/27/02-Basic-elements/">基本元素</a>
                                </li>
                                
                                <li class="search-archive-li mp-pjax">
                                    <a href="/2014/12/27/01---Basic-scene/">基础场景</a>
                                </li>
                                
                                <li class="search-archive-li mp-pjax">
                                    <a href="/2014/12/27/15-Shadows/">阴影</a>
                                </li>
                                
                                <li class="search-archive-li mp-pjax">
                                    <a href="/2014/12/27/14-Height-map/">高度地图</a>
                                </li>
                                
                                <li class="search-archive-li mp-pjax">
                                    <a href="/2014/12/27/13 Environment/">环境</a>
                                </li>
                                
                                <li class="search-archive-li mp-pjax">
                                    <a href="/2014/12/27/12 Particles/">粒子系统</a>
                                </li>
                                
                                <li class="search-archive-li mp-pjax">
                                    <a href="/2014/12/27/11   Picking collisions/">点击检测</a>
                                </li>
                                
                                <li class="search-archive-li mp-pjax">
                                    <a href="/2014/12/27/10 Intersect collision object/">碰撞检测</a>
                                </li>
                                
                                <li class="search-archive-li mp-pjax">
                                    <a href="/2014/12/27/09 Cameras and mesh collisions/">摄像机和材质纹理</a>
                                </li>
                                
                                <li class="search-archive-li mp-pjax">
                                    <a href="/2014/12/27/08 Sprites/">精灵</a>
                                </li>
                                
                                <li class="search-archive-li mp-pjax">
                                    <a href="/2014/12/27/07-Animation/">动画</a>
                                </li>
                                
                                <li class="search-archive-li mp-pjax">
                                    <a href="/2014/12/27/06-Lights/">灯光</a>
                                </li>
                                
                                <li class="search-archive-li mp-pjax">
                                    <a href="/2014/12/27/The-Playground/"></a>
                                </li>
                                
                                <li class="search-archive-li mp-pjax">
                                    <a href="/2014/12/27/How-to-use-Actions/"></a>
                                </li>
                                
                                <li class="search-archive-li mp-pjax">
                                    <a href="/2014/12/27/How-to-use-PostProcessRenderPipeline/"></a>
                                </li>
                                
                                <li class="search-archive-li mp-pjax">
                                    <a href="/2014/12/27/How-to-merge-meshes/"></a>
                                </li>
                                
                                <li class="search-archive-li mp-pjax">
                                    <a href="/2014/12/27/How-to-handle-rotations-and-translations/"></a>
                                </li>
                                
                                <li class="search-archive-li mp-pjax">
                                    <a href="/2014/12/27/Home/"></a>
                                </li>
                                
                                <li class="search-archive-li mp-pjax">
                                    <a href="/2014/12/27/How to use FresnelParameters/"></a>
                                </li>
                                
                                <li class="search-archive-li mp-pjax">
                                    <a href="/2014/12/27/Entities-exported-from-Blender/"></a>
                                </li>
                                
                                <li class="search-archive-li mp-pjax">
                                    <a href="/2014/12/27/Creating the minified version/"></a>
                                </li>
                                
                                <li class="search-archive-li mp-pjax">
                                    <a href="/2014/12/27/Using-the-VirtualJoysticksCamera-with-Babylon.js/"></a>
                                </li>
                                
                                <li class="search-archive-li mp-pjax">
                                    <a href="/2014/12/27/Babylon.js-file-format/"></a>
                                </li>
                                
                                <li class="search-archive-li mp-pjax">
                                    <a href="/2014/12/27/Converting-a-.babylon-file-to-.incremental.babylon-file/"></a>
                                </li>
                                
                                <li class="search-archive-li mp-pjax">
                                    <a href="/2014/12/27/Caching-the-resources-in-IndexedDB/"></a>
                                </li>
                                
                                <li class="search-archive-li mp-pjax">
                                    <a href="/2014/12/27/Babylon.js-Primer/"></a>
                                </li>
                                
                                <li class="search-archive-li mp-pjax">
                                    <a href="/2014/12/27/Adding-your-own-physics-engine-plugin-to-Babylon.js/"></a>
                                </li>
                                
                                <li class="search-archive-li mp-pjax">
                                    <a href="/2014/12/27/Advanced Texturing/"></a>
                                </li>
                                
                                <li class="search-archive-li mp-pjax">
                                    <a href="/2014/12/27/How-to-use-bones-and-skeletons/"></a>
                                </li>
                                
                                <li class="search-archive-li mp-pjax">
                                    <a href="/2014/12/27/How-to-use-SceneOptimizer-tool/"></a>
                                </li>
                                
                                <li class="search-archive-li mp-pjax">
                                    <a href="/2014/12/27/How-to-use-instances/"></a>
                                </li>
                                
                                <li class="search-archive-li mp-pjax">
                                    <a href="/2014/12/27/How-to-use-level-of-details/"></a>
                                </li>
                                
                                <li class="search-archive-li mp-pjax">
                                    <a href="/2014/12/27/How-to-use-lens-flares/"></a>
                                </li>
                                
                                <li class="search-archive-li mp-pjax">
                                    <a href="/2014/12/27/How to use procedural textures?/"></a>
                                </li>
                                
                                <li class="search-archive-li mp-pjax">
                                    <a href="/2014/12/27/Naming-convention/"></a>
                                </li>
                                
                                <li class="search-archive-li mp-pjax">
                                    <a href="/2014/12/27/Optimizing-performances-with-octrees/"></a>
                                </li>
                                
                                <li class="search-archive-li mp-pjax">
                                    <a href="/2014/12/27/Render-scene-on-a-PNG-(Screenshot)/"></a>
                                </li>
                                
                                <li class="search-archive-li mp-pjax">
                                    <a href="/2014/12/27/How-to-use-postprocesses/"></a>
                                </li>
                                
                                <li class="search-archive-li mp-pjax">
                                    <a href="/2014/12/27/Roadmap/"></a>
                                </li>
                                
                                <li class="search-archive-li mp-pjax">
                                    <a href="/2014/12/27/How-to-use-multi-views/"></a>
                                </li>
                                
                                <li class="search-archive-li mp-pjax">
                                    <a href="/2014/12/27/Tags/"></a>
                                </li>
                                
                                <li class="search-archive-li mp-pjax">
                                    <a href="/2014/12/27/Using AssetsManager/"></a>
                                </li>
                                
                                <li class="search-archive-li mp-pjax">
                                    <a href="/2014/12/27/Working-with-Blender/"></a>
                                </li>
                                
                                <li class="search-archive-li mp-pjax">
                                    <a href="/2014/12/27/Using-the-debug-layer/"></a>
                                </li>
                                
                                <li class="search-archive-li mp-pjax">
                                    <a href="/2014/12/27/Using-Oculus-Rift-with-Babylon.js/"></a>
                                </li>
                                
                                <li class="search-archive-li mp-pjax">
                                    <a href="/2014/12/27/Creating-your-own-file-importer/"></a>
                                </li>
                                
                                </div>
                            </ul>
                        </div>
                    </li>
                    <li>
                        <a class="fa fa-copy" href="#"><i class="fa fa-angle-left">
                            </i>&nbsp;&nbsp;分类</a>

                        <div class="mp-level page-list">
                            <h2 ><i class="fa fa-copy"></i>
                                分类</h2>
                            <a class="mp-back" href="#">返回</a>
                            <form id="search-form" action="">
                                <input type="text" class="search search-category" placeholder="搜索.."/>
                            </form>
                            <ul>
                                <div class="mp-scroll">
                                
                                </div>
                            </ul>
                        </div>
                    </li>
                    <li>
                        <a class="fa fa-tags" href="#"><i class="fa fa-angle-left">
                            </i>&nbsp;&nbsp;标签</a>
                        <div class="mp-level page-list">
                            <h2 ><i class="fa fa-tags"></i>
                                标签</h2>
                            <a class="mp-back" href="#">返回</a>
                            <form id="search-form" action="">
                                <input type="text" class="search search-tag" placeholder="搜索.."/>
                            </form>
                            <ul>
                                <div class="mp-scroll">
                                
                                </div>
                            </ul>
                        </div>
                    </li>
                    
                    <li>
                        <a class="fa fa-weibo" href="#"><i class="fa fa-angle-left"></i>&nbsp;&nbsp;微博</a>

                        <div class="mp-level page-list">
                            <h2 ><i class="fa fa-weibo"></i>
                                微博</h2>
                            <a class="mp-back" href="#">返回</a>
                        </div>
                    </li>
                    
                    <li class="mp-pjax"><a class="fa fa-user" href="/about">&nbsp;&nbsp;&nbsp;关于我们</a></li>
                    <li><a class="fa fa-github" href="http://www.ejiakt.com">&nbsp;&nbsp;&nbsp;E家课堂</a></li>

                </ul>

            </div>
        </nav>
        <div id="pjax">
            <div class="pjax-hidden" style="display: none">
                
                    <a  data-pjax href="/2014/12/28/05 Cameras/">摄像机</a>
                
                    <a  data-pjax href="/2014/12/27/04-Materials/">材质</a>
                
                    <a  data-pjax href="/2014/12/27/03---Position,-Rotation-&amp;-Scaling/">位移，旋转，缩放</a>
                
                    <a  data-pjax href="/2014/12/27/02-Basic-elements/">基本元素</a>
                
                    <a  data-pjax href="/2014/12/27/01---Basic-scene/">基础场景</a>
                
                    <a  data-pjax href="/2014/12/27/15-Shadows/">阴影</a>
                
                    <a  data-pjax href="/2014/12/27/14-Height-map/">高度地图</a>
                
                    <a  data-pjax href="/2014/12/27/13 Environment/">环境</a>
                
                    <a  data-pjax href="/2014/12/27/12 Particles/">粒子系统</a>
                
                    <a  data-pjax href="/2014/12/27/11   Picking collisions/">点击检测</a>
                
                    <a  data-pjax href="/2014/12/27/10 Intersect collision object/">碰撞检测</a>
                
                    <a  data-pjax href="/2014/12/27/09 Cameras and mesh collisions/">摄像机和材质纹理</a>
                
                    <a  data-pjax href="/2014/12/27/08 Sprites/">精灵</a>
                
                    <a  data-pjax href="/2014/12/27/07-Animation/">动画</a>
                
                    <a  data-pjax href="/2014/12/27/06-Lights/">灯光</a>
                
                    <a  data-pjax href="/2014/12/27/The-Playground/"></a>
                
                    <a  data-pjax href="/2014/12/27/How-to-use-Actions/"></a>
                
                    <a  data-pjax href="/2014/12/27/How-to-use-PostProcessRenderPipeline/"></a>
                
                    <a  data-pjax href="/2014/12/27/How-to-merge-meshes/"></a>
                
                    <a  data-pjax href="/2014/12/27/How-to-handle-rotations-and-translations/"></a>
                
                    <a  data-pjax href="/2014/12/27/Home/"></a>
                
                    <a  data-pjax href="/2014/12/27/How to use FresnelParameters/"></a>
                
                    <a  data-pjax href="/2014/12/27/Entities-exported-from-Blender/"></a>
                
                    <a  data-pjax href="/2014/12/27/Creating the minified version/"></a>
                
                    <a  data-pjax href="/2014/12/27/Using-the-VirtualJoysticksCamera-with-Babylon.js/"></a>
                
                    <a  data-pjax href="/2014/12/27/Babylon.js-file-format/"></a>
                
                    <a  data-pjax href="/2014/12/27/Converting-a-.babylon-file-to-.incremental.babylon-file/"></a>
                
                    <a  data-pjax href="/2014/12/27/Caching-the-resources-in-IndexedDB/"></a>
                
                    <a  data-pjax href="/2014/12/27/Babylon.js-Primer/"></a>
                
                    <a  data-pjax href="/2014/12/27/Adding-your-own-physics-engine-plugin-to-Babylon.js/"></a>
                
                    <a  data-pjax href="/2014/12/27/Advanced Texturing/"></a>
                
                    <a  data-pjax href="/2014/12/27/How-to-use-bones-and-skeletons/"></a>
                
                    <a  data-pjax href="/2014/12/27/How-to-use-SceneOptimizer-tool/"></a>
                
                    <a  data-pjax href="/2014/12/27/How-to-use-instances/"></a>
                
                    <a  data-pjax href="/2014/12/27/How-to-use-level-of-details/"></a>
                
                    <a  data-pjax href="/2014/12/27/How-to-use-lens-flares/"></a>
                
                    <a  data-pjax href="/2014/12/27/How to use procedural textures?/"></a>
                
                    <a  data-pjax href="/2014/12/27/Naming-convention/"></a>
                
                    <a  data-pjax href="/2014/12/27/Optimizing-performances-with-octrees/"></a>
                
                    <a  data-pjax href="/2014/12/27/Render-scene-on-a-PNG-(Screenshot)/"></a>
                
                    <a  data-pjax href="/2014/12/27/How-to-use-postprocesses/"></a>
                
                    <a  data-pjax href="/2014/12/27/Roadmap/"></a>
                
                    <a  data-pjax href="/2014/12/27/How-to-use-multi-views/"></a>
                
                    <a  data-pjax href="/2014/12/27/Tags/"></a>
                
                    <a  data-pjax href="/2014/12/27/Using AssetsManager/"></a>
                
                    <a  data-pjax href="/2014/12/27/Working-with-Blender/"></a>
                
                    <a  data-pjax href="/2014/12/27/Using-the-debug-layer/"></a>
                
                    <a  data-pjax href="/2014/12/27/Using-Oculus-Rift-with-Babylon.js/"></a>
                
                    <a  data-pjax href="/2014/12/27/Creating-your-own-file-importer/"></a>
                
                
                
                <a data-pjax class="fa fa-user" href="/about">&nbsp;&nbsp;&nbsp;关于我们</a>
            </div>
            <nav class="nexus">
                <li  style="border-left: 1px solid #c6d0da;">
                    <a id="trigger" href="#"><i class="fa fa-bars"></i></a>
                </li>
                <li ><a id="nexus-back" data-pjax href="/">babylonjs</a></li>
                
                <div id="nav-container">
                    <div class="post-navbar" style="line-height: 63px;display:none">
                        <li id="navbar-title"><a href="#">动画</a></li>
                        <li id="navbar-toc" style="border-left: none">
                            <a style="padding-right: 15px">
                                <span id="toc-content" >介绍</span><i class="fa fa-chevron-down" ></i>
                            </a>
                            <div class="hidden-box">
                                <ul id="toc"></ul>
                            </div>
                        </li>
                    </div>
                </div>
                
            </nav>

            <div class="scroller">
            <div class="scroller-inner">


<!-- -->
<!--<body class="post-template">-->
<!---->
  

<main class="content" role="main">
    <article class="post" >
    <span class="post-meta">
                  <div class="tag-tile">
                      
                  </div>
                <h1 class="post-title" style="margin: 14px 0;color:#50585D">动画</h1>

                    <div class="post-meta">
                        Post on<span class="fa fa-clock-o"></span>
                        <time datetime="2014-12-27T05:01:33.000Z"
                              itemprop="datePublished">Dec 27 2014</time>
                    </div>
    </span>

        <section class="post-content">
            <h2 id="Animation">Animation</h2>
<p>Your scene is beginning to look great, but it is very static. To put dynamics in it, we are going to learn how to tell your computer to move your meshes in any way you choose.</p>
<p><img src="http://www.babylonjs.com/tutorials/07 - Animation/07.png" alt="Elements"></p>
<p><em>Final result</em></p>
<h2 id="How_can_I_do_this_?">How can I do this ?</h2>
<p>There are two primary ways of doing animations in your scene. The first is to define a collection of keys and defining your object’s situation at each key. The second way is for more complex animations, when you change animation code at run time.</p>
<p><strong>1 - Basic animation</strong></p>
<p>The animation is based on objects called Animation (!!). An Animation is defined by various properties and a collection of keys. Every key represents the value of the Animation at that key’s given time.</p>
<p>To achieve today’s animated scene, we begin by creating our environment:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">createScene</span><span class="params">()</span> </span>{</div><div class="line">    <span class="comment">//Here... your basic scene as before: [scene, light, camera]</span></div><div class="line">    </div><div class="line">    <span class="comment">//Create a box</span></div><div class="line">    <span class="keyword">var</span> box1 = BABYLON.Mesh.CreateBox(<span class="string">"Box1"</span>, <span class="number">10.0</span>, scene);</div><div class="line">    box1.position.x = -<span class="number">20</span>;</div></pre></td></tr></table></figure>

<p>Our goal: move this “box1”. First, create our Animation object:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> animationBox = <span class="keyword">new</span> BABYLON.Animation(<span class="string">"myAnimation"</span>, <span class="string">"scaling.x"</span>, <span class="number">30</span>, BABYLON.Animation.ANIMATIONTYPE_FLOAT, BABYLON.Animation.ANIMATIONLOOPMODE_CYCLE);</div></pre></td></tr></table></figure>

<p>Much information is in the parameters:</p>
<p>Parameter 1 - Name of this animation, nothing more.</p>
<p>Parameter 2 - The property concerned. This can be any mesh property, depending upon what you want to change. Here we want to scale an object on the X axis, so it will be “scaling.x”.</p>
<p>Parameter 3 - Frames per second requested: highest FPS possible in this animation.</p>
<p>Parameter 4 - Type of change. Here you decide and enter what kind of value will be modified: is it a float (e.g. a translation), a vector (e.g. a direction), or a quaternion. Exact values are:</p>
<ul>
<li><figure class="highlight BABYLON.Animation.ANIMATIONTYPE_FLOAT```"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="deletion">-</span></div></pre></td></tr></table></figure>

</li>
</ul>
<p>BABYLON.Animation.ANIMATIONTYPE_VECTOR3</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="deletion">-</span></div></pre></td></tr></table></figure>

<p>BABYLON.Animation.ANIMATIONTYPE_QUATERNION</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">Parameter <span class="number">5.</span> Finally, you have <span class="keyword">to</span> decide <span class="keyword">and</span> enter <span class="keyword">the</span> type <span class="keyword">of</span> behavior this animation will take <span class="keyword">at</span> <span class="keyword">its</span> upper limit (e.g. will <span class="keyword">it</span> <span class="keyword">continue</span> <span class="function_start"><span class="keyword">on</span></span>, will <span class="keyword">it</span> begin again, will <span class="keyword">it</span> stop <span class="keyword">at</span> <span class="keyword">the</span> <span class="keyword">last</span> key value, etc.):</div><div class="line"></div><div class="line">* Use previous values <span class="keyword">and</span> increment <span class="keyword">it</span>:</div></pre></td></tr></table></figure>

<p>BABYLON.Animation.ANIMATIONLOOPMODE_RELATIVE</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">* Restart <span class="keyword">from</span> initial <span class="keyword">value</span>:</div></pre></td></tr></table></figure>

<p>BABYLON.Animation.ANIMATIONLOOPMODE_CYCLE</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">* Keep their final <span class="keyword">value</span>:</div></pre></td></tr></table></figure>

<p>BABYLON.Animation.ANIMATIONLOOPMODE_CONSTANT</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">Now <span class="keyword">that</span> we have our Animation object, <span class="keyword">it</span> <span class="keyword">is</span> <span class="property">time</span> <span class="keyword">to</span> <span class="command">say</span> how those values will be modified. In our case, we want <span class="keyword">to</span> scale our box, <span class="keyword">but</span> <span class="keyword">not</span> <span class="keyword">in</span> a linear way: <span class="keyword">it</span> must be faster when <span class="keyword">it</span> became larger, <span class="keyword">and</span> slower when <span class="keyword">it</span> became thinner. So:</div></pre></td></tr></table></figure>

<p>javascript<br>// An array with all animation keys<br>var keys = [];  </p>
<p>   //At the animation key 0, the value of scaling is “1”<br>    keys.push({<br>        frame: 0,<br>        value: 1<br>    });</p>
<pre><code><span class="comment">//At the animation key 20, the value of scaling is "0.2"</span>
keys.push({
    frame: <span class="number">20</span>,
    <span class="keyword">value</span>: <span class="number">0.2</span>
});

<span class="comment">//At the animation key 100, the value of scaling is "1"</span>
keys.push({
    frame: <span class="number">100</span>,
    <span class="keyword">value</span>: <span class="number">1</span>
});
</code></pre><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">Next</span>, two important step<span class="variable">s:</span></div><div class="line">* Adding the animation array <span class="keyword">to</span> the animation objec<span class="variable">t:</span></div></pre></td></tr></table></figure>

<p>javascript<br>animationBox.setKeys(keys);</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="subst">*</span> <span class="keyword">Link</span> this animation <span class="keyword">to</span> our box:</div></pre></td></tr></table></figure>

<p>javascript<br>box1.animations.push(animationBox);</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">Finally, you can launch your animation <span class="operator">in</span> <span class="constant">one</span> <span class="built_in">line</span> <span class="operator">of</span> code, <span class="keyword">at</span> <span class="keyword">any</span> <span class="built_in">time</span> <span class="operator">in</span> your application:</div></pre></td></tr></table></figure>

<p>javascript<br>scene.beginAnimation(box1, 0, 100, true);</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">This <span class="function"><span class="keyword">function</span> <span class="title">returns</span> <span class="title">a</span></span></div></pre></td></tr></table></figure>

<p>BABYLON.Animatable</p>
<figure class="highlight object"><figcaption><span>that you can use to get access to individual animations (for instance using ```getAnimationByTargetProperty``` function).</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">The</div></pre></td></tr></table></figure>

<p>BABYLON.Animatable</p>
<figure class="highlight object"><figcaption><span>also supports the following functions:</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">*</span></div></pre></td></tr></table></figure>

<p>pause()</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">*</span></div></pre></td></tr></table></figure>

<p>restart()</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">*</span></div></pre></td></tr></table></figure>

<p>stop()</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">You can also <span class="keyword">get</span> access <span class="keyword">to</span> current <span class="property">running</span></div></pre></td></tr></table></figure>

<p>BABYLON.Animatable</p>
<figure class="highlight objects"><figcaption><span>by using ```scene.getAnimatableByTarget()``` providing the target object.</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">And</span> you are done! Don<span class="attribute">'t</span> hesitate <span class="keyword">to</span> combine many animations <span class="keyword">for</span> one mesh object... by creating more Animations <span class="keyword">and</span> pushing them into the mesh<span class="attribute">'s</span> _animation_ <span class="keyword">property</span>. ;)  We have now completed an Animation <span class="keyword">for</span> box1.scaling.x. Maybe now you want <span class="keyword">to</span> build an Animation <span class="keyword">for</span> box1.scaling.y, <span class="keyword">and</span> really get box1 moving playfully.</div><div class="line"></div><div class="line">**<span class="number">2</span> - Controlling animations**</div><div class="line"></div><div class="line">Each Animation has a <span class="keyword">property</span> called</div></pre></td></tr></table></figure>

<p>currentFrame</p>
<figure class="highlight that"><figcaption><span>indicates the current animation key.</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">For advanced keyframe animation, you can also define <span class="operator">the</span> functions used <span class="built_in">to</span> interpolate (transition) between <span class="built_in">keys</span>. By default these functions are <span class="operator">the</span> following:</div></pre></td></tr></table></figure>

<p>javascript<br>BABYLON.Animation.prototype.floatInterpolateFunction = function (startValue, endValue, gradient) {<br>    return startValue + (endValue - startValue) * gradient;<br>};</p>
<p>BABYLON.Animation.prototype.quaternionInterpolateFunction = function (startValue, endValue, gradient) {<br>    return BABYLON.Quaternion.Slerp(startValue, endValue, gradient);<br>};</p>
<p>BABYLON.Animation.prototype.vector3InterpolateFunction = function (startValue, endValue, gradient) {<br>    return BABYLON.Vector3.Lerp(startValue, endValue, gradient);<br>};</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">**3 - Helper function**</div><div class="line"></div><div class="line">You can <span class="operator"><span class="keyword">use</span> an <span class="keyword">extended</span> <span class="keyword">function</span> <span class="keyword">to</span> <span class="keyword">create</span> a <span class="keyword">quick</span> animation:</span></div></pre></td></tr></table></figure>

<p>Javascript<br>Animation.CreateAndStartAnimation = function(name, mesh, tartgetProperty, framePerSecond, totalFrame, from, to, loopMode);</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">To</span> be able <span class="keyword">to</span> use this <span class="function"><span class="keyword">function</span>, <span class="title">you</span> <span class="title">need</span> <span class="title">to</span> <span class="title">know</span> <span class="title">that</span> :</span></div><div class="line">- Your animation will have predefined key frames (Only <span class="number">2</span> keyframes are generated : **Start** <span class="keyword">and</span> **<span class="keyword">End</span>**)</div><div class="line">- The animation works only <span class="keyword">on</span> **AbstractMesh** objects.</div><div class="line">- The animation <span class="keyword">is</span> starting right after the <span class="function"><span class="keyword">method</span> <span class="title">call</span>.</span></div><div class="line"></div><div class="line"><span class="title">Here</span> <span class="title">is</span> <span class="title">a</span> <span class="title">straightforward</span> <span class="title">sample</span> <span class="title">using</span> <span class="title">the</span> **<span class="title">CreateAndStartAnimation</span><span class="params">()</span>** <span class="title">function</span> :</div></pre></td></tr></table></figure>

<p>Javascript<br>BABYLON.Animation.CreateAndStartAnimation(‘boxscale’, box1, ‘scaling.x’, 30, 120, 1.0, 1.5);</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">Pretty straightforward ? :)</div><div class="line"></div><div class="line"><span class="strong">**4 - Easing functions**</span></div><div class="line"></div><div class="line">You can add some behaviors to your animations, using easing functions. </div><div class="line">If you want more informations about easing functions, here are some useful links : </div><div class="line"><span class="bullet">- </span>[<span class="link_label">MSDN Easing functions documentation</span>](<span class="link_url">http://msdn.microsoft.com/en-us/library/ee308751.aspx</span>)</div><div class="line"><span class="bullet">- </span>[<span class="link_label">Easing functions cheat sheet</span>](<span class="link_url">http://easings.net/fr</span>)</div><div class="line"></div><div class="line">All those easing functions are implemented in BABYLON allowing you to apply custom mathematical formulas to your animations.</div><div class="line"></div><div class="line">Here are the predefined easing functions you can use : </div><div class="line">-</div></pre></td></tr></table></figure>

<p>BABYLON.CircleEase()</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="deletion">-</span></div></pre></td></tr></table></figure>

<p>BABYLON.BackEase(amplitude)</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="deletion">-</span></div></pre></td></tr></table></figure>

<p>BABYLON.BounceEase(bounces, bounciness)</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="deletion">-</span></div></pre></td></tr></table></figure>

<p>BABYLON.CubicEase()</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="deletion">-</span></div></pre></td></tr></table></figure>

<p>BABYLON.ElasticEase(oscillations, springiness)</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="deletion">-</span></div></pre></td></tr></table></figure>

<p>BABYLON.ExponentialEase(exponent)</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="deletion">-</span></div></pre></td></tr></table></figure>

<p>BABYLON.PowerEase(power)</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="deletion">-</span></div></pre></td></tr></table></figure>

<p>BABYLON.QuadraticEase()</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="deletion">-</span></div></pre></td></tr></table></figure>

<p>BABYLON.QuarticEase()</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="deletion">-</span></div></pre></td></tr></table></figure>

<p>BABYLON.QuinticEase()</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="deletion">-</span></div></pre></td></tr></table></figure>

<p>BABYLON.SineEase()</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">You can <span class="operator"><span class="keyword">use</span> the **EasingMode** property <span class="keyword">to</span> <span class="keyword">alter</span> how the easing <span class="keyword">function</span> behaves, that <span class="keyword">is</span>, <span class="keyword">change</span> how the animation interpolates. </span></div><div class="line">There <span class="keyword">are</span> three possible <span class="keyword">values</span> you can give <span class="keyword">for</span> EasingMode: </div><div class="line">-</div></pre></td></tr></table></figure>

<p>BABYLON.EasingFunction.EASINGMODE_EASEIN</p>
<figure class="highlight :"><figcaption><span>Interpolation follows the mathematical formula associated with the easing function.</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="deletion">-</span></div></pre></td></tr></table></figure>

<p>BABYLON.EasingFunction.EASINGMODE_EASEOUT</p>
<figure class="highlight :"><figcaption><span>Interpolation follows 100% interpolation minus the output of the formula associated with the easing function.</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="deletion">-</span></div></pre></td></tr></table></figure>

<p>BABYLON.EasingFunction.EASINGMODE_EASEINOUT</p>
<figure class="highlight :"><figcaption><span>Interpolation uses EaseIn for the first half of the animation and EaseOut for the second half.</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">Here is <span class="operator">a</span> straightforward sample <span class="built_in">to</span> animate <span class="operator">a</span> torus <span class="operator">within</span> <span class="operator">a</span></div></pre></td></tr></table></figure>

<p>CirleEase</p>
<figure class="highlight easing"><figcaption><span>function :</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div></pre></td></tr></table></figure>

<p>Javascript<br>//Create a Vector3 animation at 30 FPS<br>var animationTorus = new BABYLON.Animation(“torusEasingAnimation”, “position”, 30,  BABYLON.Animation.ANIMATIONTYPE_VECTOR3, BABYLON.Animation.ANIMATIONLOOPMODE_CYCLE);</p>
<p>// the torus destination position<br>var nextPos = torus.position.add(new BABYLON.Vector3(-80, 0, 0));</p>
<p>// Animation keys<br>var keysTorus = [];<br>keysTorus.push({ frame: 0, value: torus.position });<br>keysTorus.push({ frame: 120, value: nextPos });<br>animationTorus.setKeys(keysTorus);</p>
<p>// Creating an easing function<br>var easingFunction = new BABYLON.CircleEase();</p>
<p>// For each easing function, you can choose beetween EASEIN (default), EASEOUT, EASEINOUT<br>easingFunction.setEasingMode(BABYLON.EasingFunction.EASINGMODE_EASEINOUT);</p>
<p>// Adding the easing function to the animation<br>animationTorus.setEasingFunction(easingFunction);</p>
<p>// Adding animation to my torus animations collection<br>torus.animations.push(animationTorus);</p>
<p>//Finally, launch animations on torus, from key 0 to key 120 with loop activated<br>scene.beginAnimation(torus, 0, 120, true);</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">You can play <span class="operator">with</span> bezier curve algorithm too, <span class="keyword">using</span> <span class="operator">the</span> **BezierCurveEase(x1, y1, x2, y2)** <span class="function"><span class="keyword">function</span>. </span></div><div class="line">For purpose, here is <span class="operator">a</span> good reference <span class="built_in">to</span> <span class="built_in">create</span> your curve algorithm : [<span class="keyword">http</span>://cubic-bezier.com](<span class="keyword">http</span>://cubic-bezier.com)</div><div class="line"></div><div class="line">Here is <span class="operator">a</span> pretty cool implementation <span class="keyword">using</span> <span class="operator">the</span> bezier curve algorithm :</div><div class="line"></div><div class="line">![](<span class="keyword">http</span>://www.dotmim.com/sitefiles/babylon/bezier.jpg)</div></pre></td></tr></table></figure>

<p>Javascript<br>var bezierEase = new BABYLON.BezierCurveEase(0.32, -0.73, 0.69, 1.59);</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">Finally</span>, you can extend the **EasingFunction** base <span class="keyword">function</span> <span class="keyword">to</span> create your own easing <span class="keyword">function</span>, <span class="keyword">like</span> this :</div></pre></td></tr></table></figure>

<p>Javascript<br>var FunnyEase = (function (_super) {<br>    __extends(FunnyEase, _super);<br>    function FunnyEase() {<br>        _super.apply(this, arguments);<br>    }<br>    FunnyEase.prototype.easeInCore = function (gradient) {<br>        // Here is the core method you should change to make your own Easing Function<br>        // Gradient is the percent of value change<br>        return Math.pow(Math.pow(gradient, 4), gradient);</p>
<pre><code>};
<span class="keyword">return</span> FunnyEase;
</code></pre><p>})(BABYLON.EasingFunction);</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">You will find <span class="operator">a</span> complete demonstration <span class="operator">of</span> <span class="operator">the</span> easing functions behaviors, <span class="operator">in</span> <span class="operator">the</span> playground : [Easing <span class="function"><span class="keyword">function</span> <span class="title">playground</span>](<span class="title">http</span>://<span class="title">www</span>.<span class="title">babylonjs-playground</span>.<span class="title">com</span>/?<span class="title">20</span>)</span></div><div class="line"></div><div class="line"></div><div class="line">**<span class="number">5</span> - Complex animation**</div><div class="line"></div><div class="line">The complex animation lets you choose everything <span class="keyword">at</span> <span class="keyword">each</span> frame <span class="operator">of</span> <span class="operator">the</span> animation (<span class="keyword">each</span> <span class="built_in">tick</span>). The code computed <span class="keyword">at</span> run <span class="built_in">time</span> must be located <span class="operator">in</span> this <span class="function"><span class="keyword">function</span>:</span></div></pre></td></tr></table></figure>

<p>javascript<br>scene.registerBeforeRender(function () {<br>    //Your code here<br>});<br>```</p>
<p>This function can be very useful for complex animation like games, where characters have to move depending on many parameters.</p>
<p>Don’t hesitate to combine all those types of animations. If well done, it’s very powerful.</p>
<p>Don’t forget to <a href="http://www.sokrate.fr/documentation/babylonjs/BABYLON.Animation.html" target="_blank" rel="external">visit our API documentation</a> in order to learn more about the <a href="http://www.sokrate.fr/documentation/babylonjs/BABYLON.Animation.html" target="_blank" rel="external"><strong>Babylon.js Animation</strong></a> class.</p>
<p>You can view, edit, and get a zip of the code used in this tutorial… <a href="http://www.babylonjs.com/playground/?7" target="_blank" rel="external"><strong>right here</strong></a> …at the Babylon.js Playground.</p>
<h2 id="Next_step">Next step</h2>
<p>Your scene is now becoming dynamic, and all your meshes can move in all directions! Feel free to try different animations on different objects, then come back and learn all about <a href="https://github.com/BabylonJS/Babylon.js/wiki/08-Sprites" target="_blank" rel="external"><strong>Sprites</strong></a>.</p>

        </section>
        <hr/>
        <nav class="pagination" style="width:auto" role="pagination">
            
            <a data-pjax class="newer-posts" href="/2014/12/27/08 Sprites/">← Prev Post</a>
            
            <a class="share-button" data-original-title title>Share this Post</a>
            
            <a data-pjax class="older-posts" href="/2014/12/27/06-Lights/">Next Post →</a>
            
        </nav>
        <br/>
        <br/>
        <section id="comment">
            <div id="comment-box"></div>
        </section>


    </article>
</main>


  
<footer class="site-footer">
    
    <div class="inner">
        <section class="copyright"><a href="/"></a> &copy; babylonjs 2014</section>
        <section class="poweredby">Published with <a target="_blank" href="http://www.ejiakt.com">E家课堂</a></section>
    </div>
</footer>
</div>
</div><!-- /scroller -->

</div><!-- /pusher -->
</div><!-- /container -->
</div>

<!-- Easter eggs -->

<div class="egg animated">
    <a id="close-button" href="#">X</a>
    <div class="block">
        <div class="loading">
            <span class="ball1"></span>
            <span class="ball2"></span>
        </div>
    </div>
</div>
  
<script src="//cdn.staticfile.org/jquery/1.11.0/jquery.min.js"></script>
<script>
    if (!window.jQuery) {
        var script = document.createElement('script');
        script.src = "/js/jquery.min.js";
        document.body.appendChild(script);
    }
</script>
<script type="text/javascript" src="/js/lib.js"></script>
<script type="text/javascript" src="/js/main.js"></script>







</body>
</html>
